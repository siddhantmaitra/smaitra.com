---
import HeaderLink from "./HeaderLink.astro";
---

<header>
	<h2>
		<a href="/" id="Name">Siddhant Maitra</a>
	</h2>
	<nav>
		<!-- <HeaderLink href="/">Home</HeaderLink> -->
		<HeaderLink href="/posts">Posts</HeaderLink>
		<HeaderLink href="/now">Now</HeaderLink>
		<HeaderLink href="/work">Work</HeaderLink>
		<HeaderLink href="#">Resume</HeaderLink>
		<button id="theme-btn">Theme</button>
	</nav>
</header>
<style>
	header {
		margin: 0em 0 1rem;
	}
	h2 {
		margin: 0.5em 0;

		a {
			text-decoration: none;
			color: #222;
		}
	}
</style>
<script is:inline>
	const theme = (() => {
		if (
			typeof localStorage !== "undefined" &&
			localStorage.getItem("theme")
		) {
			return localStorage.getItem("theme");
		}
		if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
			return "dark";
		}
		return "light";
	})();

	if (theme === "light") {
		document.documentElement.classList.remove("dark");
	} else {
		document.documentElement.classList.add("dark");
	}
	window.localStorage.setItem("theme", theme);

	const handleToggleClick = () => {
		const element = document.documentElement;
		element.classList.toggle("dark");

		const isDark = element.classList.contains("dark");
		localStorage.setItem("theme", isDark ? "dark" : "light");
	};

	document
		.getElementById("theme-btn")
		.addEventListener("click", handleToggleClick);
</script>

